"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e,n,r,i=t(require("regenerator-runtime")),o=require("@uniswap/sdk-core"),u=t(require("jsbi")),a=t(require("tiny-invariant")),c=require("@ethersproject/abi"),s=require("@ethersproject/address"),d=require("@ethersproject/solidity"),p=t(require("@uniswap/v3-periphery/artifacts/contracts/interfaces/IMulticall.sol/IMulticall.json")),l=t(require("@uniswap/v3-periphery/artifacts/contracts/NonfungiblePositionManager.sol/NonfungiblePositionManager.json")),m=t(require("@uniswap/v3-periphery/artifacts/contracts/interfaces/ISelfPermit.sol/ISelfPermit.json")),f=t(require("@uniswap/v3-periphery/artifacts/contracts/interfaces/IPeripheryPaymentsWithFee.sol/IPeripheryPaymentsWithFee.json")),h=t(require("@uniswap/v3-periphery/artifacts/contracts/lens/Quoter.sol/Quoter.json")),k=t(require("@uniswap/swap-router-contracts/artifacts/contracts/lens/QuoterV2.sol/QuoterV2.json")),A=t(require("@uniswap/v3-staker/artifacts/contracts/UniswapV3Staker.sol/UniswapV3Staker.json")),v=t(require("@uniswap/v3-periphery/artifacts/contracts/SwapRouter.sol/SwapRouter.json"));function T(t,e,n,r,i,o,u){try{var a=t[o](u),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function y(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function u(t){T(o,r,i,u,a,"next",t)}function a(t){T(o,r,i,u,a,"throw",t)}u(void 0)}))}}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}function x(){return(x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return q(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}var R,b=((e={})[1]="0x1F98431c8aD98523631AE4a59f267346ea31F984",e[6e3]="0xa1D7936dB27B5252e9f2674554719e5Cc3c654B8",e[6001]="0x30a326d09E01d7960a0A2639c8F13362e6cd304A",e),P="0x0000000000000000000000000000000000000000",C=((n={})[1]="0xe34f199b19b2b4f47f68442619d555527d244f78a3297ea89325f843f87b8b54",n[6e3]="0xe34f199b19b2b4f47f68442619d555527d244f78a3297ea89325f843f87b8b54",n[6001]="0xb08f141592c0050e62ab87dfaa72052ba6475576805a571ff865bf5bcbdb56e4",n);(R=exports.FeeAmount||(exports.FeeAmount={}))[R.LOWEST=100]="LOWEST",R[R.LOW=500]="LOW",R[R.MEDIUM=3e3]="MEDIUM",R[R.HIGH=1e4]="HIGH";var E=((r={})[exports.FeeAmount.LOWEST]=1,r[exports.FeeAmount.LOW]=10,r[exports.FeeAmount.MEDIUM]=60,r[exports.FeeAmount.HIGH]=200,r),S=u.BigInt(-1),O=u.BigInt(0),N=u.BigInt(1),F=u.exponentiate(u.BigInt(2),u.BigInt(96)),_=u.exponentiate(F,u.BigInt(2));function X(t){var e,n=t.factoryAddress,r=t.tokenA,i=t.tokenB,o=t.fee,u=t.initCodeHashManualOverride,a=r.sortsBefore(i)?[r,i]:[i,r],p=a[0];return s.getCreate2Address(n,d.keccak256(["bytes"],[c.defaultAbiCoder.encode(["address","address","uint24"],[p.address,a[1].address,o])]),null!=u?u:C[null!=(e=p.chainId)?e:1])}var U=function(){function t(){}return t.addDelta=function(t,e){return u.lessThan(e,O)?u.subtract(t,u.multiply(e,S)):u.add(t,e)},t}(),B=function(){function t(){}return t.mulDivRoundingUp=function(t,e,n){var r=u.multiply(t,e),i=u.divide(r,n);return u.notEqual(u.remainder(r,n),O)&&(i=u.add(i,N)),i},t}(),M=u.subtract(u.exponentiate(u.BigInt(2),u.BigInt(160)),N);function D(t,e){var n=u.multiply(t,e);return u.bitwiseAnd(n,o.MaxUint256)}var L=function(){function t(){}return t.getAmount0Delta=function(t,e,n,r){if(u.greaterThan(t,e)){var i=[e,t];t=i[0],e=i[1]}var o=u.leftShift(n,u.BigInt(96)),a=u.subtract(e,t);return r?B.mulDivRoundingUp(B.mulDivRoundingUp(o,a,e),N,t):u.divide(u.divide(u.multiply(o,a),e),t)},t.getAmount1Delta=function(t,e,n,r){if(u.greaterThan(t,e)){var i=[e,t];t=i[0],e=i[1]}return r?B.mulDivRoundingUp(n,u.subtract(e,t),F):u.divide(u.multiply(n,u.subtract(e,t)),F)},t.getNextSqrtPriceFromInput=function(t,e,n,r){return u.greaterThan(t,O)||a(!1),u.greaterThan(e,O)||a(!1),r?this.getNextSqrtPriceFromAmount0RoundingUp(t,e,n,!0):this.getNextSqrtPriceFromAmount1RoundingDown(t,e,n,!0)},t.getNextSqrtPriceFromOutput=function(t,e,n,r){return u.greaterThan(t,O)||a(!1),u.greaterThan(e,O)||a(!1),r?this.getNextSqrtPriceFromAmount1RoundingDown(t,e,n,!1):this.getNextSqrtPriceFromAmount0RoundingUp(t,e,n,!1)},t.getNextSqrtPriceFromAmount0RoundingUp=function(t,e,n,r){if(u.equal(n,O))return t;var i=u.leftShift(e,u.BigInt(96));if(r){var c=D(n,t);if(u.equal(u.divide(c,n),t)){var s=(p=u.add(i,c),u.bitwiseAnd(p,o.MaxUint256));if(u.greaterThanOrEqual(s,i))return B.mulDivRoundingUp(i,t,s)}return B.mulDivRoundingUp(i,N,u.add(u.divide(i,t),n))}var d=D(n,t);u.equal(u.divide(d,n),t)||a(!1),u.greaterThan(i,d)||a(!1);var p,l=u.subtract(i,d);return B.mulDivRoundingUp(i,t,l)},t.getNextSqrtPriceFromAmount1RoundingDown=function(t,e,n,r){if(r){var i=u.lessThanOrEqual(n,M)?u.divide(u.leftShift(n,u.BigInt(96)),e):u.divide(u.multiply(n,F),e);return u.add(t,i)}var o=B.mulDivRoundingUp(n,F,e);return u.greaterThan(t,o)||a(!1),u.subtract(t,o)},t}(),W=u.exponentiate(u.BigInt(10),u.BigInt(6)),K=function(){function t(){}return t.computeSwapStep=function(t,e,n,r,i){var o={},a=u.greaterThanOrEqual(t,e),c=u.greaterThanOrEqual(r,O);if(c){var s=u.divide(u.multiply(r,u.subtract(W,u.BigInt(i))),W);o.amountIn=a?L.getAmount0Delta(e,t,n,!0):L.getAmount1Delta(t,e,n,!0),o.sqrtRatioNextX96=u.greaterThanOrEqual(s,o.amountIn)?e:L.getNextSqrtPriceFromInput(t,n,s,a)}else o.amountOut=a?L.getAmount1Delta(e,t,n,!1):L.getAmount0Delta(t,e,n,!1),o.sqrtRatioNextX96=u.greaterThanOrEqual(u.multiply(r,S),o.amountOut)?e:L.getNextSqrtPriceFromOutput(t,n,u.multiply(r,S),a);var d=u.equal(e,o.sqrtRatioNextX96);return a?(o.amountIn=d&&c?o.amountIn:L.getAmount0Delta(o.sqrtRatioNextX96,t,n,!0),o.amountOut=d&&!c?o.amountOut:L.getAmount1Delta(o.sqrtRatioNextX96,t,n,!1)):(o.amountIn=d&&c?o.amountIn:L.getAmount1Delta(t,o.sqrtRatioNextX96,n,!0),o.amountOut=d&&!c?o.amountOut:L.getAmount0Delta(t,o.sqrtRatioNextX96,n,!1)),!c&&u.greaterThan(o.amountOut,u.multiply(r,S))&&(o.amountOut=u.multiply(r,S)),o.feeAmount=c&&u.notEqual(o.sqrtRatioNextX96,e)?u.subtract(r,o.amountIn):B.mulDivRoundingUp(o.amountIn,u.BigInt(i),u.subtract(W,u.BigInt(i))),[o.sqrtRatioNextX96,o.amountIn,o.amountOut,o.feeAmount]},t}(),H=u.BigInt(2),j=[128,64,32,16,8,4,2,1].map((function(t){return[t,u.exponentiate(H,u.BigInt(t))]}));function Q(t){u.greaterThan(t,O)||a(!1),u.lessThanOrEqual(t,o.MaxUint256)||a(!1);for(var e,n=0,r=w(j);!(e=r()).done;){var i=e.value,c=i[0];u.greaterThanOrEqual(t,i[1])&&(t=u.signedRightShift(t,u.BigInt(c)),n+=c)}return n}function G(t,e){return u.signedRightShift(u.multiply(t,u.BigInt(e)),u.BigInt(128))}var V=u.exponentiate(u.BigInt(2),u.BigInt(32)),z=function(){function t(){}return t.getSqrtRatioAtTick=function(e){e>=t.MIN_TICK&&e<=t.MAX_TICK&&Number.isInteger(e)||a(!1);var n=e<0?-1*e:e,r=u.BigInt(0!=(1&n)?"0xfffcb933bd6fad37aa2d162d1a594001":"0x100000000000000000000000000000000");return 0!=(2&n)&&(r=G(r,"0xfff97272373d413259a46990580e213a")),0!=(4&n)&&(r=G(r,"0xfff2e50f5f656932ef12357cf3c7fdcc")),0!=(8&n)&&(r=G(r,"0xffe5caca7e10e4e61c3624eaa0941cd0")),0!=(16&n)&&(r=G(r,"0xffcb9843d60f6159c9db58835c926644")),0!=(32&n)&&(r=G(r,"0xff973b41fa98c081472e6896dfb254c0")),0!=(64&n)&&(r=G(r,"0xff2ea16466c96a3843ec78b326b52861")),0!=(128&n)&&(r=G(r,"0xfe5dee046a99a2a811c461f1969c3053")),0!=(256&n)&&(r=G(r,"0xfcbe86c7900a88aedcffc83b479aa3a4")),0!=(512&n)&&(r=G(r,"0xf987a7253ac413176f2b074cf7815e54")),0!=(1024&n)&&(r=G(r,"0xf3392b0822b70005940c7a398e4b70f3")),0!=(2048&n)&&(r=G(r,"0xe7159475a2c29b7443b29c7fa6e889d9")),0!=(4096&n)&&(r=G(r,"0xd097f3bdfd2022b8845ad8f792aa5825")),0!=(8192&n)&&(r=G(r,"0xa9f746462d870fdf8a65dc1f90e061e5")),0!=(16384&n)&&(r=G(r,"0x70d869a156d2a1b890bb3df62baf32f7")),0!=(32768&n)&&(r=G(r,"0x31be135f97d08fd981231505542fcfa6")),0!=(65536&n)&&(r=G(r,"0x9aa508b5b7a84e1c677de54f3e99bc9")),0!=(131072&n)&&(r=G(r,"0x5d6af8dedb81196699c329225ee604")),0!=(262144&n)&&(r=G(r,"0x2216e584f5fa1ea926041bedfe98")),0!=(524288&n)&&(r=G(r,"0x48a170391f7dc42444e8fa2")),e>0&&(r=u.divide(o.MaxUint256,r)),u.greaterThan(u.remainder(r,V),O)?u.add(u.divide(r,V),N):u.divide(r,V)},t.getTickAtSqrtRatio=function(e){u.greaterThanOrEqual(e,t.MIN_SQRT_RATIO)&&u.lessThan(e,t.MAX_SQRT_RATIO)||a(!1);var n,r=u.leftShift(e,u.BigInt(32)),i=Q(r);n=u.greaterThanOrEqual(u.BigInt(i),u.BigInt(128))?u.signedRightShift(r,u.BigInt(i-127)):u.leftShift(r,u.BigInt(127-i));for(var o=u.leftShift(u.subtract(u.BigInt(i),u.BigInt(128)),u.BigInt(64)),c=0;c<14;c++){n=u.signedRightShift(u.multiply(n,n),u.BigInt(127));var s=u.signedRightShift(n,u.BigInt(128));o=u.bitwiseOr(o,u.leftShift(s,u.BigInt(63-c))),n=u.signedRightShift(n,s)}var d=u.multiply(o,u.BigInt("255738958999603826347141")),p=u.toNumber(u.signedRightShift(u.subtract(d,u.BigInt("3402992956809132418596140100660247210")),u.BigInt(128))),l=u.toNumber(u.signedRightShift(u.add(d,u.BigInt("291339464771989622907027621153398088495")),u.BigInt(128)));return p===l?p:u.lessThanOrEqual(t.getSqrtRatioAtTick(l),e)?l:p},t}();z.MIN_TICK=-887272,z.MAX_TICK=-z.MIN_TICK,z.MIN_SQRT_RATIO=u.BigInt("4295128739"),z.MAX_SQRT_RATIO=u.BigInt("1461446703485210103287273052203988822378723970342");var Y=function(){function t(){}var e=t.prototype;return e.getTick=function(){var e=y(i.mark((function e(n){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(t.ERROR_MESSAGE);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.nextInitializedTickWithinOneWord=function(){var e=y(i.mark((function e(n,r,o){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(t.ERROR_MESSAGE);case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),t}();function Z(t,e){for(var n=0;n<t.length-1;n++)if(e(t[n],t[n+1])>0)return!1;return!0}function $(t,e){return t.index-e.index}Y.ERROR_MESSAGE="No tick data provider was given";var J=function(){function t(){}return t.validateList=function(t,e){e>0||a(!1),t.every((function(t){return t.index%e==0}))||a(!1),u.equal(t.reduce((function(t,e){return u.add(t,e.liquidityNet)}),O),O)||a(!1),Z(t,$)||a(!1)},t.isBelowSmallest=function(t,e){return t.length>0||a(!1),e<t[0].index},t.isAtOrAboveLargest=function(t,e){return t.length>0||a(!1),e>=t[t.length-1].index},t.getTick=function(t,e){var n=t[this.binarySearch(t,e)];return n.index!==e&&a(!1),n},t.binarySearch=function(t,e){this.isBelowSmallest(t,e)&&a(!1);for(var n,r=0,i=t.length-1;;){if(t[n=Math.floor((r+i)/2)].index<=e&&(n===t.length-1||t[n+1].index>e))return n;t[n].index<e?r=n+1:i=n-1}},t.nextInitializedTick=function(e,n,r){return r?(t.isBelowSmallest(e,n)&&a(!1),t.isAtOrAboveLargest(e,n)?e[e.length-1]:e[this.binarySearch(e,n)]):(this.isAtOrAboveLargest(e,n)&&a(!1),this.isBelowSmallest(e,n)?e[0]:e[this.binarySearch(e,n)+1])},t.nextInitializedTickWithinOneWord=function(e,n,r,i){var o=Math.floor(n/i);if(r){var u=(o>>8<<8)*i;if(t.isBelowSmallest(e,n))return[u,!1];var a=t.nextInitializedTick(e,n,r).index,c=Math.max(u,a);return[c,c===a]}var s=((1+(o+1>>8)<<8)-1)*i;if(this.isAtOrAboveLargest(e,n))return[s,!1];var d=this.nextInitializedTick(e,n,r).index,p=Math.min(s,d);return[p,p===d]},t}();function tt(t){var e=u.BigInt(t).toString(16);return e.length%2!=0&&(e="0"+e),"0x"+e}function et(t,e){var n=t.pools.reduce((function(t,e,n){var r=t.inputToken,i=t.path,o=t.types,u=e.token0.equals(r)?e.token1:e.token0;return 0===n?{inputToken:u,types:["address","uint24","address"],path:[r.address,e.fee,u.address]}:{inputToken:u,types:[].concat(o,["uint24","address"]),path:[].concat(i,[e.fee,u.address])}}),{inputToken:t.input.wrapped,path:[],types:[]}),r=n.path,i=n.types;return e?d.pack(i.reverse(),r.reverse()):d.pack(i,r)}function nt(t,e){var n=u.leftShift(u.BigInt(t),u.BigInt(192)),r=u.BigInt(e),i=u.divide(n,r);return o.sqrt(i)}function rt(t,e,n){if(u.greaterThan(t,e)){var r=[e,t];t=r[0],e=r[1]}var i=u.divide(u.multiply(t,e),F);return u.divide(u.multiply(u.BigInt(n),i),u.subtract(e,t))}function it(t,e,n){if(u.greaterThan(t,e)){var r=[e,t];t=r[0],e=r[1]}var i=u.multiply(u.multiply(u.BigInt(n),t),e),o=u.multiply(F,u.subtract(e,t));return u.divide(i,o)}function ot(t,e,n){if(u.greaterThan(t,e)){var r=[e,t];t=r[0],e=r[1]}return u.divide(u.multiply(u.BigInt(n),F),u.subtract(e,t))}function ut(t,e,n,r,i,o){if(u.greaterThan(e,n)){var a=[n,e];e=a[0],n=a[1]}var c=o?it:rt;if(u.lessThanOrEqual(t,e))return c(e,n,r);if(u.lessThan(t,n)){var s=c(t,n,r),d=ot(e,t,i);return u.lessThan(s,d)?s:d}return ot(e,n,i)}var at=u.exponentiate(u.BigInt(2),u.BigInt(128)),ct=function(){function t(){}return t.getTokensOwed=function(t,e,n,r,i){return[u.divide(u.multiply(pt(r,t),n),at),u.divide(u.multiply(pt(i,e),n),at)]},t}();function st(t,e,n){var r=z.getSqrtRatioAtTick(n),i=u.multiply(r,r);return t.sortsBefore(e)?new o.Price(t,e,_,i):new o.Price(t,e,i,_)}var dt=u.exponentiate(u.BigInt(2),u.BigInt(256));function pt(t,e){var n=u.subtract(t,e);return u.lessThan(n,O)?u.add(dt,n):n}var lt=function(){function t(){}return t.getFeeGrowthInside=function(t,e,n,r,i,o,u){var a,c,s,d;return i>=n?(a=t.feeGrowthOutside0X128,c=t.feeGrowthOutside1X128):(a=pt(o,t.feeGrowthOutside0X128),c=pt(u,t.feeGrowthOutside1X128)),i<r?(s=e.feeGrowthOutside0X128,d=e.feeGrowthOutside1X128):(s=pt(o,e.feeGrowthOutside0X128),d=pt(u,e.feeGrowthOutside1X128)),[pt(pt(o,a),s),pt(pt(u,c),d)]},t}(),mt=function(t){var e=t.index,n=t.liquidityGross,r=t.liquidityNet;e>=z.MIN_TICK&&e<=z.MAX_TICK||a(!1),this.index=e,this.liquidityGross=u.BigInt(n),this.liquidityNet=u.BigInt(r)},ft=function(){function t(t,e){var n=t.map((function(t){return t instanceof mt?t:new mt(t)}));J.validateList(n,e),this.ticks=n}var e=t.prototype;return e.getTick=function(){var t=y(i.mark((function t(e){return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",J.getTick(this.ticks,e));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.nextInitializedTickWithinOneWord=function(){var t=y(i.mark((function t(e,n,r){return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",J.nextInitializedTickWithinOneWord(this.ticks,e,n,r));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),t}(),ht=new Y,kt=function(){function t(t,e,n,r,i,o,c){void 0===c&&(c=ht),Number.isInteger(n)&&n<1e6||a(!1);var s=z.getSqrtRatioAtTick(o),d=z.getSqrtRatioAtTick(o+1);u.greaterThanOrEqual(u.BigInt(r),s)&&u.lessThanOrEqual(u.BigInt(r),d)||a(!1);var p=t.sortsBefore(e)?[t,e]:[e,t];this.token0=p[0],this.token1=p[1],this.fee=n,this.sqrtRatioX96=u.BigInt(r),this.liquidity=u.BigInt(i),this.tickCurrent=o,this.tickDataProvider=Array.isArray(c)?new ft(c,E[n]):c}t.getAddress=function(t,e,n,r,i){var o;return X({factoryAddress:null!=i?i:b[null!=(o=t.chainId)?o:1],fee:n,tokenA:t,tokenB:e,initCodeHashManualOverride:r})};var e=t.prototype;return e.involvesToken=function(t){return t.equals(this.token0)||t.equals(this.token1)},e.priceOf=function(t){return this.involvesToken(t)||a(!1),t.equals(this.token0)?this.token0Price:this.token1Price},e.getOutputAmount=function(){var e=y(i.mark((function e(n,r){var c,s,d,p,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.involvesToken(n.currency)||a(!1),c=n.currency.equals(this.token0),e.next=4,this.swap(c,n.quotient,r);case 4:return d=(s=e.sent).sqrtRatioX96,p=s.liquidity,l=s.tickCurrent,e.abrupt("return",[o.CurrencyAmount.fromRawAmount(c?this.token1:this.token0,u.multiply(s.amountCalculated,S)),new t(this.token0,this.token1,this.fee,d,p,l,this.tickDataProvider)]);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e.getInputAmount=function(){var e=y(i.mark((function e(n,r){var c,s,d,p,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.currency.isToken&&this.involvesToken(n.currency)||a(!1),c=n.currency.equals(this.token1),e.next=4,this.swap(c,u.multiply(n.quotient,S),r);case 4:return d=(s=e.sent).sqrtRatioX96,p=s.liquidity,l=s.tickCurrent,e.abrupt("return",[o.CurrencyAmount.fromRawAmount(c?this.token0:this.token1,s.amountCalculated),new t(this.token0,this.token1,this.fee,d,p,l,this.tickDataProvider)]);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e.swap=function(){var t=y(i.mark((function t(e,n,r){var o,c,s,d,p,l;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r||(r=e?u.add(z.MIN_SQRT_RATIO,N):u.subtract(z.MAX_SQRT_RATIO,N)),e?(u.greaterThan(r,z.MIN_SQRT_RATIO)||a(!1),u.lessThan(r,this.sqrtRatioX96)||a(!1)):(u.lessThan(r,z.MAX_SQRT_RATIO)||a(!1),u.greaterThan(r,this.sqrtRatioX96)||a(!1)),o=u.greaterThanOrEqual(n,O),c={amountSpecifiedRemaining:n,amountCalculated:O,sqrtPriceX96:this.sqrtRatioX96,tick:this.tickCurrent,liquidity:this.liquidity};case 4:if(!u.notEqual(c.amountSpecifiedRemaining,O)||c.sqrtPriceX96==r){t.next=35;break}return(s={}).sqrtPriceStartX96=c.sqrtPriceX96,t.next=9,this.tickDataProvider.nextInitializedTickWithinOneWord(c.tick,e,this.tickSpacing);case 9:if(s.tickNext=(d=t.sent)[0],s.initialized=d[1],s.tickNext<z.MIN_TICK?s.tickNext=z.MIN_TICK:s.tickNext>z.MAX_TICK&&(s.tickNext=z.MAX_TICK),s.sqrtPriceNextX96=z.getSqrtRatioAtTick(s.tickNext),p=K.computeSwapStep(c.sqrtPriceX96,(e?u.lessThan(s.sqrtPriceNextX96,r):u.greaterThan(s.sqrtPriceNextX96,r))?r:s.sqrtPriceNextX96,c.liquidity,c.amountSpecifiedRemaining,this.fee),c.sqrtPriceX96=p[0],s.amountIn=p[1],s.amountOut=p[2],s.feeAmount=p[3],o?(c.amountSpecifiedRemaining=u.subtract(c.amountSpecifiedRemaining,u.add(s.amountIn,s.feeAmount)),c.amountCalculated=u.subtract(c.amountCalculated,s.amountOut)):(c.amountSpecifiedRemaining=u.add(c.amountSpecifiedRemaining,s.amountOut),c.amountCalculated=u.add(c.amountCalculated,u.add(s.amountIn,s.feeAmount))),!u.equal(c.sqrtPriceX96,s.sqrtPriceNextX96)){t.next=32;break}if(!s.initialized){t.next=29;break}return t.t0=u,t.next=25,this.tickDataProvider.getTick(s.tickNext);case 25:t.t1=t.sent.liquidityNet,l=t.t0.BigInt.call(t.t0,t.t1),e&&(l=u.multiply(l,S)),c.liquidity=U.addDelta(c.liquidity,l);case 29:c.tick=e?s.tickNext-1:s.tickNext,t.next=33;break;case 32:u.notEqual(c.sqrtPriceX96,s.sqrtPriceStartX96)&&(c.tick=z.getTickAtSqrtRatio(c.sqrtPriceX96));case 33:t.next=4;break;case 35:return t.abrupt("return",{amountCalculated:c.amountCalculated,sqrtRatioX96:c.sqrtPriceX96,liquidity:c.liquidity,tickCurrent:c.tick});case 36:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),I(t,[{key:"token0Price",get:function(){var t;return null!=(t=this._token0Price)?t:this._token0Price=new o.Price(this.token0,this.token1,_,u.multiply(this.sqrtRatioX96,this.sqrtRatioX96))}},{key:"token1Price",get:function(){var t;return null!=(t=this._token1Price)?t:this._token1Price=new o.Price(this.token1,this.token0,u.multiply(this.sqrtRatioX96,this.sqrtRatioX96),_)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"tickSpacing",get:function(){return E[this.fee]}}]),t}(),At=function(){function t(t){var e=t.pool,n=t.liquidity,r=t.tickLower,i=t.tickUpper;this._token0Amount=null,this._token1Amount=null,this._mintAmounts=null,r<i||a(!1),r>=z.MIN_TICK&&r%e.tickSpacing==0||a(!1),i<=z.MAX_TICK&&i%e.tickSpacing==0||a(!1),this.pool=e,this.tickLower=r,this.tickUpper=i,this.liquidity=u.BigInt(n)}var e=t.prototype;return e.ratiosAfterSlippage=function(t){var e=this.pool.token0Price.asFraction.multiply(new o.Percent(1).subtract(t)),n=this.pool.token0Price.asFraction.multiply(t.add(1)),r=nt(e.numerator,e.denominator);u.lessThanOrEqual(r,z.MIN_SQRT_RATIO)&&(r=u.add(z.MIN_SQRT_RATIO,u.BigInt(1)));var i=nt(n.numerator,n.denominator);return u.greaterThanOrEqual(i,z.MAX_SQRT_RATIO)&&(i=u.subtract(z.MAX_SQRT_RATIO,u.BigInt(1))),{sqrtRatioX96Lower:r,sqrtRatioX96Upper:i}},e.mintAmountsWithSlippage=function(e){var n=this.ratiosAfterSlippage(e),r=n.sqrtRatioX96Upper,i=n.sqrtRatioX96Lower,o=new kt(this.pool.token0,this.pool.token1,this.pool.fee,i,0,z.getTickAtSqrtRatio(i)),u=new kt(this.pool.token0,this.pool.token1,this.pool.fee,r,0,z.getTickAtSqrtRatio(r)),a=t.fromAmounts(x({pool:this.pool,tickLower:this.tickLower,tickUpper:this.tickUpper},this.mintAmounts,{useFullPrecision:!1}));return{amount0:new t({pool:u,liquidity:a.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).mintAmounts.amount0,amount1:new t({pool:o,liquidity:a.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).mintAmounts.amount1}},e.burnAmountsWithSlippage=function(e){var n=this.ratiosAfterSlippage(e),r=n.sqrtRatioX96Upper,i=n.sqrtRatioX96Lower,o=new kt(this.pool.token0,this.pool.token1,this.pool.fee,i,0,z.getTickAtSqrtRatio(i)),u=new t({pool:new kt(this.pool.token0,this.pool.token1,this.pool.fee,r,0,z.getTickAtSqrtRatio(r)),liquidity:this.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).amount0,a=new t({pool:o,liquidity:this.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).amount1;return{amount0:u.quotient,amount1:a.quotient}},t.fromAmounts=function(e){var n=e.pool,r=e.tickLower,i=e.tickUpper,o=e.amount0,u=e.amount1,a=e.useFullPrecision,c=z.getSqrtRatioAtTick(r),s=z.getSqrtRatioAtTick(i);return new t({pool:n,tickLower:r,tickUpper:i,liquidity:ut(n.sqrtRatioX96,c,s,o,u,a)})},t.fromAmount0=function(e){return t.fromAmounts({pool:e.pool,tickLower:e.tickLower,tickUpper:e.tickUpper,amount0:e.amount0,amount1:o.MaxUint256,useFullPrecision:e.useFullPrecision})},t.fromAmount1=function(e){return t.fromAmounts({pool:e.pool,tickLower:e.tickLower,tickUpper:e.tickUpper,amount0:o.MaxUint256,amount1:e.amount1,useFullPrecision:!0})},I(t,[{key:"token0PriceLower",get:function(){return st(this.pool.token0,this.pool.token1,this.tickLower)}},{key:"token0PriceUpper",get:function(){return st(this.pool.token0,this.pool.token1,this.tickUpper)}},{key:"amount0",get:function(){return null===this._token0Amount&&(this._token0Amount=o.CurrencyAmount.fromRawAmount(this.pool.token0,this.pool.tickCurrent<this.tickLower?L.getAmount0Delta(z.getSqrtRatioAtTick(this.tickLower),z.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!1):this.pool.tickCurrent<this.tickUpper?L.getAmount0Delta(this.pool.sqrtRatioX96,z.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!1):O)),this._token0Amount}},{key:"amount1",get:function(){return null===this._token1Amount&&(this._token1Amount=o.CurrencyAmount.fromRawAmount(this.pool.token1,this.pool.tickCurrent<this.tickLower?O:L.getAmount1Delta(z.getSqrtRatioAtTick(this.tickLower),this.pool.tickCurrent<this.tickUpper?this.pool.sqrtRatioX96:z.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!1))),this._token1Amount}},{key:"mintAmounts",get:function(){return null===this._mintAmounts?this.pool.tickCurrent<this.tickLower?{amount0:L.getAmount0Delta(z.getSqrtRatioAtTick(this.tickLower),z.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!0),amount1:O}:this.pool.tickCurrent<this.tickUpper?{amount0:L.getAmount0Delta(this.pool.sqrtRatioX96,z.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!0),amount1:L.getAmount1Delta(z.getSqrtRatioAtTick(this.tickLower),this.pool.sqrtRatioX96,this.liquidity,!0)}:{amount0:O,amount1:L.getAmount1Delta(z.getSqrtRatioAtTick(this.tickLower),z.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!0)}:this._mintAmounts}}]),t}(),vt=function(){function t(t,e,n){this._midPrice=null,t.length>0||a(!1);var r=t[0].chainId;t.every((function(t){return t.chainId===r}))||a(!1);var i=e.wrapped;t[0].involvesToken(i)||a(!1),t[t.length-1].involvesToken(n.wrapped)||a(!1);for(var o,u=[i],c=w(t.entries());!(o=c()).done;){var s=o.value,d=s[1],p=u[s[0]];p.equals(d.token0)||p.equals(d.token1)||a(!1);var l=p.equals(d.token0)?d.token1:d.token0;u.push(l)}this.pools=t,this.tokenPath=u,this.input=e,this.output=null!=n?n:u[u.length-1]}return I(t,[{key:"chainId",get:function(){return this.pools[0].chainId}},{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;var t=this.pools.slice(1).reduce((function(t,e){var n=t.price;return t.nextInput.equals(e.token0)?{nextInput:e.token1,price:n.multiply(e.token0Price)}:{nextInput:e.token0,price:n.multiply(e.token1Price)}}),this.pools[0].token0.equals(this.input.wrapped)?{nextInput:this.pools[0].token1,price:this.pools[0].token0Price}:{nextInput:this.pools[0].token0,price:this.pools[0].token1Price}).price;return this._midPrice=new o.Price(this.input,this.output,t.denominator,t.numerator)}}]),t}();function Tt(t,e){return t.inputAmount.currency.equals(e.inputAmount.currency)||a(!1),t.outputAmount.currency.equals(e.outputAmount.currency)||a(!1),t.outputAmount.equalTo(e.outputAmount)?t.inputAmount.equalTo(e.inputAmount)?t.swaps.reduce((function(t,e){return t+e.route.tokenPath.length}),0)-e.swaps.reduce((function(t,e){return t+e.route.tokenPath.length}),0):t.inputAmount.lessThan(e.inputAmount)?-1:1:t.outputAmount.lessThan(e.outputAmount)?1:-1}var yt=function(){function t(t){var e=t.routes,n=t.tradeType,r=e[0].inputAmount.currency,i=e[0].outputAmount.currency;e.every((function(t){return r.wrapped.equals(t.route.input.wrapped)}))||a(!1),e.every((function(t){return i.wrapped.equals(t.route.output.wrapped)}))||a(!1);for(var o,u=e.map((function(t){return t.route.pools.length})).reduce((function(t,e){return t+e}),0),c=new Set,s=w(e);!(o=s()).done;)for(var d,p=w(o.value.route.pools);!(d=p()).done;){var l=d.value;c.add(kt.getAddress(l.token0,l.token1,l.fee))}u!=c.size&&a(!1),this.swaps=e,this.tradeType=n}t.exactIn=function(){var e=y(i.mark((function e(n,r){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.fromRoute(n,r,o.TradeType.EXACT_INPUT));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.exactOut=function(){var e=y(i.mark((function e(n,r){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.fromRoute(n,r,o.TradeType.EXACT_OUTPUT));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.fromRoute=function(){var e=y(i.mark((function e(n,r,u){var c,s,d,p,l,m,f;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=new Array(n.tokenPath.length),u!==o.TradeType.EXACT_INPUT){e.next=19;break}r.currency.equals(n.input)||a(!1),c[0]=r.wrapped,p=0;case 5:if(!(p<n.tokenPath.length-1)){e.next=15;break}return l=n.pools[p],e.next=9,l.getOutputAmount(c[p]);case 9:c[p+1]=e.sent[0];case 12:p++,e.next=5;break;case 15:s=o.CurrencyAmount.fromFractionalAmount(n.input,r.numerator,r.denominator),d=o.CurrencyAmount.fromFractionalAmount(n.output,c[c.length-1].numerator,c[c.length-1].denominator),e.next=34;break;case 19:r.currency.equals(n.output)||a(!1),c[c.length-1]=r.wrapped,m=n.tokenPath.length-1;case 22:if(!(m>0)){e.next=32;break}return f=n.pools[m-1],e.next=26,f.getInputAmount(c[m]);case 26:c[m-1]=e.sent[0];case 29:m--,e.next=22;break;case 32:s=o.CurrencyAmount.fromFractionalAmount(n.input,c[0].numerator,c[0].denominator),d=o.CurrencyAmount.fromFractionalAmount(n.output,r.numerator,r.denominator);case 34:return e.abrupt("return",new t({routes:[{inputAmount:s,outputAmount:d,route:n}],tradeType:u}));case 35:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),t.fromRoutes=function(){var e=y(i.mark((function e(n,r){var u,c,s,d,p,l,m,f,h,k,A,v,T;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=[],c=w(n);case 2:if((s=c()).done){e.next=43;break}if(p=(d=s.value).route,l=d.amount,m=new Array(p.tokenPath.length),f=void 0,h=void 0,r!==o.TradeType.EXACT_INPUT){e.next=25;break}l.currency.equals(p.input)||a(!1),f=o.CurrencyAmount.fromFractionalAmount(p.input,l.numerator,l.denominator),m[0]=o.CurrencyAmount.fromFractionalAmount(p.input.wrapped,l.numerator,l.denominator),k=0;case 12:if(!(k<p.tokenPath.length-1)){e.next=22;break}return A=p.pools[k],e.next=16,A.getOutputAmount(m[k]);case 16:m[k+1]=e.sent[0];case 19:k++,e.next=12;break;case 22:h=o.CurrencyAmount.fromFractionalAmount(p.output,m[m.length-1].numerator,m[m.length-1].denominator),e.next=40;break;case 25:l.currency.equals(p.output)||a(!1),h=o.CurrencyAmount.fromFractionalAmount(p.output,l.numerator,l.denominator),m[m.length-1]=o.CurrencyAmount.fromFractionalAmount(p.output.wrapped,l.numerator,l.denominator),v=p.tokenPath.length-1;case 29:if(!(v>0)){e.next=39;break}return T=p.pools[v-1],e.next=33,T.getInputAmount(m[v]);case 33:m[v-1]=e.sent[0];case 36:v--,e.next=29;break;case 39:f=o.CurrencyAmount.fromFractionalAmount(p.input,m[0].numerator,m[0].denominator);case 40:u.push({route:p,inputAmount:f,outputAmount:h});case 41:e.next=2;break;case 43:return e.abrupt("return",new t({routes:u,tradeType:r}));case 44:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.createUncheckedTrade=function(e){return new t(x({},e,{routes:[{inputAmount:e.inputAmount,outputAmount:e.outputAmount,route:e.route}]}))},t.createUncheckedTradeWithMultipleRoutes=function(e){return new t(e)};var e=t.prototype;return e.minimumAmountOut=function(t,e){if(void 0===e&&(e=this.outputAmount),t.lessThan(O)&&a(!1),this.tradeType===o.TradeType.EXACT_OUTPUT)return e;var n=new o.Fraction(N).add(t).invert().multiply(e.quotient).quotient;return o.CurrencyAmount.fromRawAmount(e.currency,n)},e.maximumAmountIn=function(t,e){if(void 0===e&&(e=this.inputAmount),t.lessThan(O)&&a(!1),this.tradeType===o.TradeType.EXACT_INPUT)return e;var n=new o.Fraction(N).add(t).multiply(e.quotient).quotient;return o.CurrencyAmount.fromRawAmount(e.currency,n)},e.worstExecutionPrice=function(t){return new o.Price(this.inputAmount.currency,this.outputAmount.currency,this.maximumAmountIn(t).quotient,this.minimumAmountOut(t).quotient)},t.bestTradeExactIn=function(){var e=y(i.mark((function e(n,r,u,c,s,d,p){var l,m,f,h,k,A,v,T,y,g,I;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=void 0===(m=(l=void 0===c?{}:c).maxNumResults)?3:m,k=void 0===(h=l.maxHops)?3:h,void 0===s&&(s=[]),void 0===d&&(d=r),void 0===p&&(p=[]),n.length>0||a(!1),k>0||a(!1),r===d||s.length>0||a(!1),A=d.wrapped,v=u.wrapped,T=0;case 10:if(!(T<n.length)){e.next=46;break}if((y=n[T]).token0.equals(A.currency)||y.token1.equals(A.currency)){e.next=14;break}return e.abrupt("continue",43);case 14:return g=void 0,e.prev=15,e.next=19,y.getOutputAmount(A);case 19:g=e.sent[0],e.next=28;break;case 23:if(e.prev=23,e.t0=e.catch(15),!e.t0.isInsufficientInputAmountError){e.next=27;break}return e.abrupt("continue",43);case 27:throw e.t0;case 28:if(!g.currency.isToken||!g.currency.equals(v)){e.next=39;break}return e.t1=o.sortedInsert,e.t2=p,e.next=33,t.fromRoute(new vt([].concat(s,[y]),r.currency,u),r,o.TradeType.EXACT_INPUT);case 33:e.t3=e.sent,e.t4=f,e.t5=Tt,(0,e.t1)(e.t2,e.t3,e.t4,e.t5),e.next=43;break;case 39:if(!(k>1&&n.length>1)){e.next=43;break}return I=n.slice(0,T).concat(n.slice(T+1,n.length)),e.next=43,t.bestTradeExactIn(I,r,u,{maxNumResults:f,maxHops:k-1},[].concat(s,[y]),g,p);case 43:T++,e.next=10;break;case 46:return e.abrupt("return",p);case 47:case"end":return e.stop()}}),e,null,[[15,23]])})));return function(t,n,r,i,o,u,a){return e.apply(this,arguments)}}(),t.bestTradeExactOut=function(){var e=y(i.mark((function e(n,r,u,c,s,d,p){var l,m,f,h,k,A,v,T,y,g,I;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=void 0===(m=(l=void 0===c?{}:c).maxNumResults)?3:m,k=void 0===(h=l.maxHops)?3:h,void 0===s&&(s=[]),void 0===d&&(d=u),void 0===p&&(p=[]),n.length>0||a(!1),k>0||a(!1),u===d||s.length>0||a(!1),A=d.wrapped,v=r.wrapped,T=0;case 10:if(!(T<n.length)){e.next=46;break}if((y=n[T]).token0.equals(A.currency)||y.token1.equals(A.currency)){e.next=14;break}return e.abrupt("continue",43);case 14:return g=void 0,e.prev=15,e.next=19,y.getInputAmount(A);case 19:g=e.sent[0],e.next=28;break;case 23:if(e.prev=23,e.t0=e.catch(15),!e.t0.isInsufficientReservesError){e.next=27;break}return e.abrupt("continue",43);case 27:throw e.t0;case 28:if(!g.currency.equals(v)){e.next=39;break}return e.t1=o.sortedInsert,e.t2=p,e.next=33,t.fromRoute(new vt([y].concat(s),r,u.currency),u,o.TradeType.EXACT_OUTPUT);case 33:e.t3=e.sent,e.t4=f,e.t5=Tt,(0,e.t1)(e.t2,e.t3,e.t4,e.t5),e.next=43;break;case 39:if(!(k>1&&n.length>1)){e.next=43;break}return I=n.slice(0,T).concat(n.slice(T+1,n.length)),e.next=43,t.bestTradeExactOut(I,r,u,{maxNumResults:f,maxHops:k-1},[y].concat(s),g,p);case 43:T++,e.next=10;break;case 46:return e.abrupt("return",p);case 47:case"end":return e.stop()}}),e,null,[[15,23]])})));return function(t,n,r,i,o,u,a){return e.apply(this,arguments)}}(),I(t,[{key:"route",get:function(){return 1!=this.swaps.length&&a(!1),this.swaps[0].route}},{key:"inputAmount",get:function(){if(this._inputAmount)return this._inputAmount;var t=this.swaps[0].inputAmount.currency,e=this.swaps.map((function(t){return t.inputAmount})).reduce((function(t,e){return t.add(e)}),o.CurrencyAmount.fromRawAmount(t,0));return this._inputAmount=e,this._inputAmount}},{key:"outputAmount",get:function(){if(this._outputAmount)return this._outputAmount;var t=this.swaps[0].outputAmount.currency,e=this.swaps.map((function(t){return t.outputAmount})).reduce((function(t,e){return t.add(e)}),o.CurrencyAmount.fromRawAmount(t,0));return this._outputAmount=e,this._outputAmount}},{key:"executionPrice",get:function(){var t;return null!=(t=this._executionPrice)?t:this._executionPrice=new o.Price(this.inputAmount.currency,this.outputAmount.currency,this.inputAmount.quotient,this.outputAmount.quotient)}},{key:"priceImpact",get:function(){if(this._priceImpact)return this._priceImpact;for(var t,e=o.CurrencyAmount.fromRawAmount(this.outputAmount.currency,0),n=w(this.swaps);!(t=n()).done;){var r=t.value;e=e.add(r.route.midPrice.quote(r.inputAmount))}var i=e.subtract(this.outputAmount).divide(e);return this._priceImpact=new o.Percent(i.numerator,i.denominator),this._priceImpact}}]),t}(),gt=function(){function t(){}return t.encodeMulticall=function(e){return Array.isArray(e)||(e=[e]),1===e.length?e[0]:t.INTERFACE.encodeFunctionData("multicall",[e])},t}();gt.INTERFACE=new c.Interface(p.abi);var It=function(){function t(){}return t.encodePermit=function(e,n){return"nonce"in n?t.INTERFACE.encodeFunctionData("selfPermitAllowed",[e.address,tt(n.nonce),tt(n.expiry),n.v,n.r,n.s]):t.INTERFACE.encodeFunctionData("selfPermit",[e.address,tt(n.amount),tt(n.deadline),n.v,n.r,n.s])},t}();It.INTERFACE=new c.Interface(m.abi);var xt=function(){function t(){}return t.encodeFeeBips=function(t){return tt(t.multiply(1e4).quotient)},t.encodeUnwrapWETH9=function(e,n,r){if(n=o.validateAndParseAddress(n),r){var i=this.encodeFeeBips(r.fee),u=o.validateAndParseAddress(r.recipient);return t.INTERFACE.encodeFunctionData("unwrapWETH9WithFee",[tt(e),n,i,u])}return t.INTERFACE.encodeFunctionData("unwrapWETH9",[tt(e),n])},t.encodeSweepToken=function(e,n,r,i){if(r=o.validateAndParseAddress(r),i){var u=this.encodeFeeBips(i.fee),a=o.validateAndParseAddress(i.recipient);return t.INTERFACE.encodeFunctionData("sweepTokenWithFee",[e.address,tt(n),r,u,a])}return t.INTERFACE.encodeFunctionData("sweepToken",[e.address,tt(n),r])},t.encodeRefundETH=function(){return t.INTERFACE.encodeFunctionData("refundETH")},t}();xt.INTERFACE=new c.Interface(f.abi);var qt=tt(u.subtract(u.exponentiate(u.BigInt(2),u.BigInt(128)),u.BigInt(1)));function wt(t){return Object.keys(t).some((function(t){return"recipient"===t}))}var Rt=function(){function t(){}return t.encodeCreate=function(e){return t.INTERFACE.encodeFunctionData("createAndInitializePoolIfNecessary",[e.token0.address,e.token1.address,e.fee,tt(e.sqrtRatioX96)])},t.createCallParameters=function(t){return{calldata:this.encodeCreate(t),value:tt(0)}},t.addCallParameters=function(e,n){u.greaterThan(e.liquidity,O)||a(!1);var r=[],i=e.mintAmounts,c=i.amount0,s=i.amount1,d=e.mintAmountsWithSlippage(n.slippageTolerance),p=tt(d.amount0),l=tt(d.amount1),m=tt(n.deadline);if(wt(n)&&n.createPool&&r.push(this.encodeCreate(e.pool)),n.token0Permit&&r.push(It.encodePermit(e.pool.token0,n.token0Permit)),n.token1Permit&&r.push(It.encodePermit(e.pool.token1,n.token1Permit)),wt(n)){var f=o.validateAndParseAddress(n.recipient);r.push(t.INTERFACE.encodeFunctionData("mint",[{token0:e.pool.token0.address,token1:e.pool.token1.address,fee:e.pool.fee,tickLower:e.tickLower,tickUpper:e.tickUpper,amount0Desired:tt(c),amount1Desired:tt(s),amount0Min:p,amount1Min:l,recipient:f,deadline:m}]))}else r.push(t.INTERFACE.encodeFunctionData("increaseLiquidity",[{tokenId:tt(n.tokenId),amount0Desired:tt(c),amount1Desired:tt(s),amount0Min:p,amount1Min:l,deadline:m}]));var h=tt(0);if(n.useNative){var k=n.useNative.wrapped;e.pool.token0.equals(k)||e.pool.token1.equals(k)||a(!1);var A=e.pool.token0.equals(k)?c:s;u.greaterThan(A,O)&&r.push(xt.encodeRefundETH()),h=tt(A)}return{calldata:gt.encodeMulticall(r),value:h}},t.encodeCollect=function(e){var n=[],r=tt(e.tokenId),i=e.expectedCurrencyOwed0.currency.isNative||e.expectedCurrencyOwed1.currency.isNative,u=o.validateAndParseAddress(e.recipient);if(n.push(t.INTERFACE.encodeFunctionData("collect",[{tokenId:r,recipient:i?P:u,amount0Max:qt,amount1Max:qt}])),i){var a=e.expectedCurrencyOwed0.currency.isNative?e.expectedCurrencyOwed1.currency:e.expectedCurrencyOwed0.currency,c=e.expectedCurrencyOwed0.currency.isNative?e.expectedCurrencyOwed1.quotient:e.expectedCurrencyOwed0.quotient;n.push(xt.encodeUnwrapWETH9(e.expectedCurrencyOwed0.currency.isNative?e.expectedCurrencyOwed0.quotient:e.expectedCurrencyOwed1.quotient,u)),n.push(xt.encodeSweepToken(a,c,u))}return n},t.collectCallParameters=function(e){var n=t.encodeCollect(e);return{calldata:gt.encodeMulticall(n),value:tt(0)}},t.removeCallParameters=function(e,n){var r=[],i=tt(n.deadline),c=tt(n.tokenId),s=new At({pool:e.pool,liquidity:n.liquidityPercentage.multiply(e.liquidity).quotient,tickLower:e.tickLower,tickUpper:e.tickUpper});u.greaterThan(s.liquidity,O)||a(!1);var d=s.burnAmountsWithSlippage(n.slippageTolerance),p=d.amount0,l=d.amount1;n.permit&&r.push(t.INTERFACE.encodeFunctionData("permit",[o.validateAndParseAddress(n.permit.spender),c,tt(n.permit.deadline),n.permit.v,n.permit.r,n.permit.s])),r.push(t.INTERFACE.encodeFunctionData("decreaseLiquidity",[{tokenId:c,liquidity:tt(s.liquidity),amount0Min:tt(p),amount1Min:tt(l),deadline:i}]));var m=n.collectOptions,f=m.expectedCurrencyOwed0,h=m.expectedCurrencyOwed1,k=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}(m,["expectedCurrencyOwed0","expectedCurrencyOwed1"]);return r.push.apply(r,t.encodeCollect(x({tokenId:tt(n.tokenId),expectedCurrencyOwed0:f.add(o.CurrencyAmount.fromRawAmount(f.currency,p)),expectedCurrencyOwed1:h.add(o.CurrencyAmount.fromRawAmount(h.currency,l))},k))),n.liquidityPercentage.equalTo(N)?n.burnToken&&r.push(t.INTERFACE.encodeFunctionData("burn",[c])):!0===n.burnToken&&a(!1),{calldata:gt.encodeMulticall(r),value:tt(0)}},t.safeTransferFromParameters=function(e){var n=o.validateAndParseAddress(e.recipient),r=o.validateAndParseAddress(e.sender);return{calldata:e.data?t.INTERFACE.encodeFunctionData("safeTransferFrom(address,address,uint256,bytes)",[r,n,tt(e.tokenId),e.data]):t.INTERFACE.encodeFunctionData("safeTransferFrom(address,address,uint256)",[r,n,tt(e.tokenId)]),value:tt(0)}},t}();Rt.INTERFACE=new c.Interface(l.abi);var bt=function(){function t(){}return t.quoteCallParameters=function(t,e,n,r){void 0===r&&(r={});var i,u=1===t.pools.length,c=tt(e.quotient),s=r.useQuoterV2?this.V2INTERFACE:this.V1INTERFACE;if(u){var d,p,l={tokenIn:t.tokenPath[0].address,tokenOut:t.tokenPath[1].address,fee:t.pools[0].fee,sqrtPriceLimitX96:tt(null!=(d=null==(p=r)?void 0:p.sqrtPriceLimitX96)?d:0)},m=x({},l,n==o.TradeType.EXACT_INPUT?{amountIn:c}:{amount:c});i=s.encodeFunctionData(n===o.TradeType.EXACT_INPUT?"quoteExactInputSingle":"quoteExactOutputSingle",r.useQuoterV2?[m]:[l.tokenIn,l.tokenOut,l.fee,c,l.sqrtPriceLimitX96])}else{var f;void 0!==(null==(f=r)?void 0:f.sqrtPriceLimitX96)&&a(!1);var h=et(t,n===o.TradeType.EXACT_OUTPUT);i=s.encodeFunctionData(n===o.TradeType.EXACT_INPUT?"quoteExactInput":"quoteExactOutput",[h,c])}return{calldata:i,value:tt(0)}},t}();bt.V1INTERFACE=new c.Interface(h.abi),bt.V2INTERFACE=new c.Interface(k.abi);var Pt=function(){function t(){}return t.encodeClaim=function(e,n){var r,i=[];i.push(t.INTERFACE.encodeFunctionData("unstakeToken",[this._encodeIncentiveKey(e),tt(n.tokenId)]));var u=o.validateAndParseAddress(n.recipient),a=null!=(r=n.amount)?r:0;return i.push(t.INTERFACE.encodeFunctionData("claimReward",[e.rewardToken.address,u,tt(a)])),i},t.collectRewards=function(e,n){e=Array.isArray(e)?e:[e];for(var r=[],i=0;i<e.length;i++){var o=e[i];(r=r.concat(this.encodeClaim(o,n))).push(t.INTERFACE.encodeFunctionData("stakeToken",[this._encodeIncentiveKey(o),tt(n.tokenId)]))}return{calldata:gt.encodeMulticall(r),value:tt(0)}},t.withdrawToken=function(e,n){var r=[];e=Array.isArray(e)?e:[e];for(var i={tokenId:n.tokenId,recipient:n.recipient,amount:n.amount},u=0;u<e.length;u++)r=r.concat(this.encodeClaim(e[u],i));var a=o.validateAndParseAddress(n.owner);return r.push(t.INTERFACE.encodeFunctionData("withdrawToken",[tt(n.tokenId),a,n.data?n.data:tt(0)])),{calldata:gt.encodeMulticall(r),value:tt(0)}},t.encodeDeposit=function(e){var n;if((e=Array.isArray(e)?e:[e]).length>1){for(var r=[],i=0;i<e.length;i++)r.push(this._encodeIncentiveKey(e[i]));n=c.defaultAbiCoder.encode([t.INCENTIVE_KEY_ABI+"[]"],[r])}else n=c.defaultAbiCoder.encode([t.INCENTIVE_KEY_ABI],[this._encodeIncentiveKey(e[0])]);return n},t._encodeIncentiveKey=function(t){var e=t.pool,n=e.token0,r=e.token1,i=e.fee,u=o.validateAndParseAddress(t.refundee);return{rewardToken:t.rewardToken.address,pool:kt.getAddress(n,r,i),startTime:tt(t.startTime),endTime:tt(t.endTime),refundee:u}},t}();Pt.INTERFACE=new c.Interface(A.abi),Pt.INCENTIVE_KEY_ABI="tuple(address rewardToken, address pool, uint256 startTime, uint256 endTime, address refundee)";var Ct=function(){function t(){}return t.swapCallParameters=function(e,n){Array.isArray(e)||(e=[e]);var r=e[0],i=r.inputAmount.currency.wrapped,u=r.outputAmount.currency.wrapped;e.every((function(t){return t.inputAmount.currency.wrapped.equals(i)}))||a(!1),e.every((function(t){return t.outputAmount.currency.wrapped.equals(u)}))||a(!1);var c=[],s=o.CurrencyAmount.fromRawAmount(e[0].inputAmount.currency,0),d=o.CurrencyAmount.fromRawAmount(e[0].outputAmount.currency,0),p=e.reduce((function(t,e){return t.add(e.minimumAmountOut(n.slippageTolerance))}),d),l=r.inputAmount.currency.isNative&&r.tradeType===o.TradeType.EXACT_OUTPUT,m=r.outputAmount.currency.isNative,f=m||!!n.fee,h=r.inputAmount.currency.isNative?e.reduce((function(t,e){return t.add(e.maximumAmountIn(n.slippageTolerance))}),s):s;n.inputTokenPermit&&(r.inputAmount.currency.isToken||a(!1),c.push(It.encodePermit(r.inputAmount.currency,n.inputTokenPermit)));for(var k,A=o.validateAndParseAddress(n.recipient),v=tt(n.deadline),T=w(e);!(k=T()).done;)for(var y,g=k.value,I=w(g.swaps);!(y=I()).done;){var x=y.value,q=x.route,R=x.outputAmount,b=tt(g.maximumAmountIn(n.slippageTolerance,x.inputAmount).quotient),C=tt(g.minimumAmountOut(n.slippageTolerance,R).quotient);if(1===q.pools.length)if(g.tradeType===o.TradeType.EXACT_INPUT){var E,S={tokenIn:q.tokenPath[0].address,tokenOut:q.tokenPath[1].address,fee:q.pools[0].fee,recipient:f?P:A,deadline:v,amountIn:b,amountOutMinimum:C,sqrtPriceLimitX96:tt(null!=(E=n.sqrtPriceLimitX96)?E:0)};c.push(t.INTERFACE.encodeFunctionData("exactInputSingle",[S]))}else{var O,N={tokenIn:q.tokenPath[0].address,tokenOut:q.tokenPath[1].address,fee:q.pools[0].fee,recipient:f?P:A,deadline:v,amountOut:C,amountInMaximum:b,sqrtPriceLimitX96:tt(null!=(O=n.sqrtPriceLimitX96)?O:0)};c.push(t.INTERFACE.encodeFunctionData("exactOutputSingle",[N]))}else{void 0!==n.sqrtPriceLimitX96&&a(!1);var F=et(q,g.tradeType===o.TradeType.EXACT_OUTPUT);c.push(g.tradeType===o.TradeType.EXACT_INPUT?t.INTERFACE.encodeFunctionData("exactInput",[{path:F,recipient:f?P:A,deadline:v,amountIn:b,amountOutMinimum:C}]):t.INTERFACE.encodeFunctionData("exactOutput",[{path:F,recipient:f?P:A,deadline:v,amountOut:C,amountInMaximum:b}]))}}return f&&c.push(n.fee?m?xt.encodeUnwrapWETH9(p.quotient,A,n.fee):xt.encodeSweepToken(r.outputAmount.currency.wrapped,p.quotient,A,n.fee):xt.encodeUnwrapWETH9(p.quotient,A)),l&&c.push(xt.encodeRefundETH()),{calldata:gt.encodeMulticall(c),value:tt(h.quotient)}},t}();Ct.INTERFACE=new c.Interface(v.abi),exports.ADDRESS_ZERO=P,exports.FACTORY_ADDRESS=b,exports.FullMath=B,exports.LiquidityMath=U,exports.Multicall=gt,exports.NoTickDataProvider=Y,exports.NonfungiblePositionManager=Rt,exports.POOL_INIT_CODE_HASH=C,exports.Payments=xt,exports.Pool=kt,exports.Position=At,exports.PositionLibrary=ct,exports.Route=vt,exports.SelfPermit=It,exports.SqrtPriceMath=L,exports.Staker=Pt,exports.SwapMath=K,exports.SwapQuoter=bt,exports.SwapRouter=Ct,exports.TICK_SPACINGS=E,exports.Tick=mt,exports.TickLibrary=lt,exports.TickList=J,exports.TickListDataProvider=ft,exports.TickMath=z,exports.Trade=yt,exports.computePoolAddress=X,exports.encodeRouteToPath=et,exports.encodeSqrtRatioX96=nt,exports.isSorted=Z,exports.maxLiquidityForAmounts=ut,exports.mostSignificantBit=Q,exports.nearestUsableTick=function(t,e){Number.isInteger(t)&&Number.isInteger(e)||a(!1),e>0||a(!1),t>=z.MIN_TICK&&t<=z.MAX_TICK||a(!1);var n=Math.round(t/e)*e;return n<z.MIN_TICK?n+e:n>z.MAX_TICK?n-e:n},exports.priceToClosestTick=function(t){var e=t.baseCurrency.sortsBefore(t.quoteCurrency),n=e?nt(t.numerator,t.denominator):nt(t.denominator,t.numerator),r=z.getTickAtSqrtRatio(n),i=st(t.baseCurrency,t.quoteCurrency,r+1);return e?t.lessThan(i)||r++:t.greaterThan(i)||r++,r},exports.subIn256=pt,exports.tickToPrice=st,exports.toHex=tt,exports.tradeComparator=Tt;
//# sourceMappingURL=v3-sdk.cjs.production.min.js.map
